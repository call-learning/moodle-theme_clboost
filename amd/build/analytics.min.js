define("theme_clboost/analytics",["exports","core/templates","core/log"],(function(_exports,_templates,_log){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * This is the main analytics code that will trigger google analytics when
   * the right event is triggered (policy accepted)
   *
   * @module   theme_clboost
   * @copyright 2021 - CALL Learning - Laurent David <laurent@call-learning.fr>
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_log=_interopRequireDefault(_log);_exports.init=(gatriggerid,gacode)=>{const checkGAPolicyAccepted=event=>{const policies=event.detail;if(policies){const found=policies.find((policy=>policy.policyversionid===gatriggerid));found&&found.accepted&&_templates.default.render("theme_clboost/gtag",{gtagtrackingid:gacode}).then(((html,js)=>{const ga=document.createElement("div");return document.body.appendChild(ga),_templates.default.replaceNodeContents(ga,html,js),!0})).catch((error=>{_log.default.error(error)}))}};document.addEventListener("grpd_policies_accepted",checkGAPolicyAccepted),document.addEventListener("grpd_policies_current_status",checkGAPolicyAccepted)}}));

//# sourceMappingURL=analytics.min.js.map